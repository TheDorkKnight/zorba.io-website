<!DOCTYPE html><html lang="en" class="js cssanimations ng-scope" ng-app="28.ioApp" prefix="og: http://ogp.me/ns#" ng-controller="MainCtrl"><head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Zorba - The NoSQL Query Processor</title>
        <meta name="description" content="Zorba - The NoSQL Query Processor">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta charset="utf-8">

        <meta content="28.io" name="apple-mobile-web-app-title">
        <link href="/images/iphone-icon.png" rel="apple-touch-icon-precomposed">
        <link href="/favicon.png" rel="icon" type="image/png">

        <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="http://www.zorba.io/blog/atom.xml">
        <base href="/">
        <link rel="stylesheet" href="/styles/index.css">
    <style type="text/css">@charset "UTF-8";[ng\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak{display:none;}ng\:form{display:block;}</style></head>
    <body ready="" class="" ng-cloak="undefined">
        <!--[if lt IE 9]>
            <script type="text/javascript">location.href = "/outdated";</script>
        <![endif]-->
        <div class="navbar navbar-default navbar-fixed-top" id="top-menu" navbar-toggle="">
            <div class="container">
                <a href="/home" id="logo">
<svg width="172px" height="44px" viewBox="0 0 172 44" version="1.1" xmlns="http://www.w3.org/2000/svg" style="margin-right: 30px">
    <defs></defs>
    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="g3354-1-3-0" transform="translate(70.000000, 3.000000)" fill="#3498DB">
            <path d="M36.8599281,6.08695652 C23.7462235,7.46138534 17.3241713,7.87186266 12.0855118,12.5394913 C9.61392853,8.89602738 2.41221529,6.6246591 0,6.89251341 L0.0401259499,9.84221332 C11.3218642,17.172198 8.15927521,31.2798979 5.60530924,40 L18.0693794,40 C15.1069036,30.4981162 15.7891093,23.8890354 16.4644797,20.4999181 C17.5216924,12.0444371 30.0443188,9.56353073 37,7.95199463 L36.8599281,6.08695652 Z" id="path3217-2-16-8-3-4-8-9"></path>
            <path d="M17.2092989,4.7826087 C17.2112417,6.18001565 16.3916489,7.47202866 15.0597079,8.1712421 C13.7277668,8.87045553 12.0861867,8.87045553 10.7542456,8.1712421 C9.42230457,7.47202866 8.60271176,6.18001565 8.60465461,4.7826087 C8.60271176,3.38520174 9.42230457,2.09318873 10.7542456,1.39397529 C12.0861867,0.694761858 13.7277668,0.694761858 15.0597079,1.39397529 C16.3916489,2.09318873 17.2112417,3.38520174 17.2092989,4.7826087 L17.2092989,4.7826087 Z" id="path3830-2-4-8-2-3-6-0-4" transform="translate(12.906977, 4.782609) rotate(-12.486691) translate(-12.906977, -4.782609) "></path>
        </g>
        <path d="M0.896,35.2271939 L0.896,42.1301694 L34.4088328,42.1301694 L34.4088328,34.7818406 L12.5308539,34.7818406 L33.8521412,9.28536648 L33.8521412,2.38239095 L2.56607473,2.38239095 L2.56607473,9.73071974 L22.2172873,9.73071974 L0.896,35.2271939 Z M37.8046514,27.7675268 C37.8046514,30.0685301 38.1572192,32.1468246 38.8623654,34.0024724 C39.5675116,35.8581203 40.5695464,37.4446754 41.8684999,38.7621854 C43.1674534,40.0796954 44.7261743,41.0910083 46.5447092,41.7961545 C48.3632441,42.5013007 50.4044261,42.8538685 52.6683165,42.8538685 C54.9322069,42.8538685 56.982667,42.5013007 58.8197584,41.7961545 C60.6568498,41.0910083 62.2248487,40.0796954 63.5238022,38.7621854 C64.8227557,37.4446754 65.8247905,35.8581203 66.5299367,34.0024724 C67.2350829,32.1468246 67.5876507,30.0685301 67.5876507,27.7675268 C67.5876507,25.4665234 67.2350829,23.3789509 66.5299367,21.5047466 C65.8247905,19.6305422 64.8227557,18.034709 63.5238022,16.717199 C62.2248487,15.399689 60.6568498,14.379098 58.8197584,13.6553953 C56.982667,12.9316927 54.9322069,12.5698468 52.6683165,12.5698468 C50.4044261,12.5698468 48.3632441,12.9316927 46.5447092,13.6553953 C44.7261743,14.379098 43.1674534,15.399689 41.8684999,16.717199 C40.5695464,18.034709 39.5675116,19.6305422 38.8623654,21.5047466 C38.1572192,23.3789509 37.8046514,25.4665234 37.8046514,27.7675268 Z M45.7096718,27.7675268 C45.7096718,26.6170251 45.821009,25.4850969 46.0436867,24.3717082 C46.2663645,23.2583195 46.6467666,22.2748408 47.1849045,21.4212428 C47.7230424,20.5676448 48.4374561,19.8717873 49.328167,19.3336494 C50.218878,18.7955115 51.33225,18.5264466 52.6683165,18.5264466 C54.0043829,18.5264466 55.1270331,18.7955115 56.0363005,19.3336494 C56.945568,19.8717873 57.6692598,20.5676448 58.2073977,21.4212428 C58.7455355,22.2748408 59.1259376,23.2583195 59.3486154,24.3717082 C59.5712931,25.4850969 59.6826303,26.6170251 59.6826303,27.7675268 C59.6826303,28.9180285 59.5712931,30.0406786 59.3486154,31.1355108 C59.1259376,32.230343 58.7455355,33.2138217 58.2073977,34.0859762 C57.6692598,34.9581306 56.945568,35.6539882 56.0363005,36.1735696 C55.1270331,36.693151 54.0043829,36.9529378 52.6683165,36.9529378 C51.33225,36.9529378 50.218878,36.693151 49.328167,36.1735696 C48.4374561,35.6539882 47.7230424,34.9581306 47.1849045,34.0859762 C46.6467666,33.2138217 46.2663645,32.230343 46.0436867,31.1355108 C45.821009,30.0406786 45.7096718,28.9180285 45.7096718,27.7675268 Z" id="Zo" fill="#333333"></path>
        <path d="M109.28037,2.38239095 L109.28037,42.1301694 L116.795707,42.1301694 L116.795707,38.456005 L116.907045,38.456005 C117.760643,40.0518622 119.022465,41.1837904 120.692548,41.8518236 C122.362631,42.5198569 124.255363,42.8538685 126.370802,42.8538685 C127.818207,42.8538685 129.247034,42.5569693 130.657327,41.9631619 C132.067619,41.3693546 133.338719,40.4601008 134.470664,39.2353732 C135.602609,38.0106456 136.521141,36.4426467 137.226287,34.5313294 C137.931434,32.6200121 138.284001,30.3468776 138.284001,27.7118576 C138.284001,25.0768377 137.931434,22.8037031 137.226287,20.8923858 C136.521141,18.9810685 135.602609,17.4130696 134.470664,16.188342 C133.338719,14.9636144 132.067619,14.0543606 130.657327,13.4605533 C129.247034,12.866746 127.818207,12.5698468 126.370802,12.5698468 C124.58938,12.5698468 122.872931,12.9131365 121.221405,13.5997262 C119.569878,14.2863159 118.261666,15.3718536 117.296729,16.8563719 L117.185391,16.8563719 L117.185391,2.38239095 L109.28037,2.38239095 Z M130.378981,27.7675268 C130.378981,28.9551414 130.249088,30.1056258 129.989297,31.2190145 C129.729506,32.3324033 129.32127,33.3158819 128.764575,34.1694799 C128.207881,35.0230779 127.512024,35.7003792 126.676982,36.2014041 C125.841941,36.7024291 124.830628,36.9529378 123.643013,36.9529378 C122.492511,36.9529378 121.490477,36.7024291 120.636878,36.2014041 C119.78328,35.7003792 119.078145,35.0230779 118.521451,34.1694799 C117.964756,33.3158819 117.55652,32.3324033 117.296729,31.2190145 C117.036938,30.1056258 116.907045,28.9551414 116.907045,27.7675268 C116.907045,26.5427992 117.036938,25.3737586 117.296729,24.2603699 C117.55652,23.1469811 117.964756,22.1635025 118.521451,21.3099045 C119.078145,20.4563065 119.78328,19.7790052 120.636878,19.2779803 C121.490477,18.7769553 122.492511,18.5264466 123.643013,18.5264466 C124.830628,18.5264466 125.841941,18.7769553 126.676982,19.2779803 C127.512024,19.7790052 128.207881,20.4563065 128.764575,21.3099045 C129.32127,22.1635025 129.729506,23.1469811 129.989297,24.2603699 C130.249088,25.3737586 130.378981,26.5427992 130.378981,27.7675268 Z M142.960211,22.200611 L150.865231,22.200611 C151.013683,20.6418668 151.533256,19.5284948 152.423967,18.8604616 C153.314678,18.1924283 154.539388,17.8584167 156.098132,17.8584167 C156.803278,17.8584167 157.462023,17.9048072 158.074387,17.9975896 C158.686751,18.090372 159.224881,18.275934 159.688792,18.5542812 C160.152704,18.8326284 160.523828,19.2223086 160.802176,19.7233335 C161.080523,20.2243584 161.219694,20.9016597 161.219694,21.7552578 C161.256807,22.5717428 161.015577,23.1933755 160.495995,23.6201745 C159.976414,24.0469735 159.271278,24.3717071 158.380567,24.5943848 C157.489856,24.8170625 156.469265,24.9840683 155.318764,25.0954072 C154.168262,25.2067461 152.999221,25.3551957 151.811607,25.5407605 C150.623992,25.7263253 149.445673,25.976834 148.276615,26.2922941 C147.107557,26.6077542 146.06841,27.0809373 145.159142,27.7118576 C144.249875,28.3427779 143.507627,29.187085 142.932376,30.2448043 C142.357125,31.3025236 142.069504,32.6478481 142.069504,34.2808182 C142.069504,35.7653365 142.320013,37.0457143 142.821038,38.1219901 C143.322063,39.1982658 144.01792,40.0889634 144.908631,40.7941096 C145.799342,41.4992558 146.838489,42.0188294 148.026104,42.352846 C149.213719,42.6868627 150.494096,42.8538685 151.867276,42.8538685 C153.648698,42.8538685 155.392981,42.5940817 157.100177,42.0745003 C158.807373,41.5549189 160.291869,40.645665 161.553709,39.3467115 C161.590822,39.82918 161.655769,40.3023631 161.748551,40.7662751 C161.841334,41.230187 161.961949,41.6848139 162.110401,42.1301694 L170.12676,42.1301694 C169.75563,41.5363621 169.495843,40.6456645 169.347391,39.4580499 C169.198939,38.2704352 169.124715,37.0271698 169.124715,35.7282163 L169.124715,20.7532129 C169.124715,19.0089039 168.735034,17.6079108 167.955662,16.5501915 C167.17629,15.4924723 166.174255,14.6667213 164.949528,14.072914 C163.7248,13.4791067 162.370198,13.0801484 160.885679,12.8760271 C159.401161,12.6719059 157.935221,12.5698468 156.487816,12.5698468 C154.891959,12.5698468 153.305404,12.7275745 151.728103,13.0430346 C150.150802,13.3584948 148.731253,13.8873465 147.469412,14.6296056 C146.207572,15.3718647 145.168425,16.3553434 144.35194,17.580071 C143.535455,18.8047985 143.07155,20.3449632 142.960211,22.200611 Z M161.219694,28.0458726 L161.219694,30.9963379 C161.219694,31.4416934 161.173304,32.0354918 161.080521,32.777751 C160.987739,33.5200101 160.73723,34.25298 160.328988,34.9766827 C159.920745,35.7003853 159.289834,36.322018 158.436236,36.8415995 C157.582638,37.3611809 156.376485,37.6209677 154.817741,37.6209677 C154.186821,37.6209677 153.574466,37.5652991 152.980659,37.4539602 C152.386852,37.3426213 151.867278,37.1477812 151.421923,36.869434 C150.976567,36.5910868 150.623999,36.2106847 150.364209,35.7282163 C150.104418,35.2457479 149.974524,34.6519494 149.974524,33.9468033 C149.974524,33.2045441 150.104418,32.5921895 150.364209,32.1097211 C150.623999,31.6272526 150.967289,31.2282943 151.394088,30.9128342 C151.820887,30.597374 152.321904,30.3468653 152.897155,30.1613005 C153.472406,29.9757358 154.056926,29.8272862 154.650734,29.7159473 C155.281654,29.6046084 155.912565,29.5118274 156.543485,29.4376015 C157.174405,29.3633756 157.777482,29.2705946 158.352733,29.1592557 C158.927984,29.0479168 159.466113,28.9087453 159.967138,28.741737 C160.468163,28.5747287 160.885678,28.3427762 161.219694,28.0458726 Z" id="ba" fill="#333333"></path>
    </g>
</svg>
                </a>
                <div class="navbar-header">
                    <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
                <div class="collapse navbar-collapse">
                    <ul class="nav navbar-nav">
                        <li ng-class="navClass(menu.home.href)">
                            <a ng-href="/home" ng-bind="menu.home.label" class="ng-binding" href="/home">Home</a>
                        </li>
                        <li ng-class="navClass(menu.documentation.href)" class="active">
                            <a ng-href="/documentation" ng-bind="menu.documentation.label" class="ng-binding" href="/documentation">Documentation</a>
                        </li>
                        <li ng-class="navClass(menu.tryzorba.href)">
                            <a ng-href="http://try.zorba.io/" ng-bind="menu.tryzorba.label" class="ng-binding" href="http://try.zorba.io/">Live Demo</a>
                        </li>
                        <li ng-class="navClass(menu.blog.href)">
                            <a ng-href="/blog" ng-bind="menu.blog.label" class="ng-binding" href="/blog">Blog</a>
                        </li>
                        <li ng-class="navClass(menu.download.href)">
                            <a ng-href="/download" ng-bind="menu.download.label" class="ng-binding" href="/download">Download</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="ng-view"><div class="container ng-scope" id="documentation">
    <div class="row">
        <!-- ngIf: state !== 'notfound' && !debug --><div class="col-sm-4 sidebar ng-scope" ng-if="state !== 'notfound' &amp;&amp; !debug">
            <div class="inner-sidebar">
            <ul class="nav nav-pills nav-stacked">
                <li class="dropdown selected-version">
                    <a class="dropdown-toggle">
                        <span ng-bind="currentVersion.version" class="ng-binding">3.0</span>
                        <span ng-bind="currentVersion.codename" class="ng-binding">Kratos</span>
                        <span ng-show="currentVersion.latest">(latest)</span>
                        <!--i class="fa fa-caret-down"></i-->
                    </a>
                    <!--ul class="dropdown-menu versions">
                        <li ng-repeat="version in index.versions" ng-show="currentVersion.version != version.version">
                            <a ng-href="/documentation/{{version.version}}">
                                <span ng-bind="version.version"></span>
                                <span ng-bind="version.codename"></span>
                                <span ng-show="version.latest">(latest)</span>
                            </a>
                        </li>
                    </ul-->
                    <ul class="versions">
                        <!-- ngRepeat: version in index.versions --><li ng-repeat="version in index.versions" ng-show="currentVersion.version != version.version" class="ng-scope" style="display: none; ">
                            <a ng-href="/documentation/3.0" href="/documentation/3.0">
                                <span ng-bind="version.version" class="ng-binding">3.0</span>
                                <span ng-bind="version.codename" class="ng-binding">Kratos</span>
                                <span ng-show="version.latest">(latest)</span>
                            </a>
                        </li>
                    </ul>
                </li>
            </ul>
            <div class="slider">
                <!-- Current -->
                <div class="current" ng-show="panel.status === 'current'">
                    <ul class="nav nav-pills nav-stacked">
                        <li ng-show="path.split('/').length &gt; 3">
                            <a href="/documentation/latest/zorba" ng-click="previous()">
                                <i class="fa fa-angle-left"></i>
                                <span>Previous</span>
                            </a>
                        </li>
                        <!-- ngRepeat: item in currentItem.children --><li ng-repeat="item in currentItem.children" ng-class="{ active: (path + '/' + item.id) === currentPath}" class="ng-scope">
                            <a ng-href="/documentation/latest/zorba/specifications/overview" ng-click="next(item)" href="/documentation/latest/zorba/specifications/overview">
                                <span ng-bind="item.label" class="ng-binding">Overview</span>
                                <i class="pull-right fa fa-angle-right" ng-show="item.children" style="display: none; "></i>
                            </a>
                        </li><li ng-repeat="item in currentItem.children" ng-class="{ active: (path + '/' + item.id) === currentPath}" class="ng-scope">
                            <a ng-href="/documentation/latest/zorba/specifications/xqddf" ng-click="next(item)" href="/documentation/latest/zorba/specifications/xqddf">
                                <span ng-bind="item.label" class="ng-binding">Data Definition Facility</span>
                                <i class="pull-right fa fa-angle-right" ng-show="item.children" style="display: none; "></i>
                            </a>
                        </li><li ng-repeat="item in currentItem.children" ng-class="{ active: (path + '/' + item.id) === currentPath}" class="ng-scope active">
                            <a ng-href="/documentation/latest/zorba/specifications/options_and_annotations" ng-click="next(item)" href="/documentation/latest/zorba/specifications/options_and_annotations">
                                <span ng-bind="item.label" class="ng-binding">Zorba Specific Options and Annotations</span>
                                <i class="pull-right fa fa-angle-right" ng-show="item.children" style="display: none; "></i>
                            </a>
                        </li>
                    </ul>
                </div>

                <!-- Next -->
                <div class="next slideRight" ng-show="panel.status === 'next'" next="" style="display: none; ">
                    <ul class="nav nav-pills nav-stacked">
                        <li ng-show="menu &amp;&amp; path.split('/').length &gt; 4">
                            <a ng-href="/documentation/latest" ng-click="previous()" href="/documentation/latest">
                                <i class="fa fa-angle-left"></i>
                                <span>Previous</span>
                            </a>
                        </li>
                        <!-- ngRepeat: item in currentItem.parent.children --><li ng-repeat="item in currentItem.parent.children" class="ng-scope">
                            <a>
                                <span ng-bind="item.label" class="ng-binding">XQuery &amp; JSONiq</span>
                                <i class="pull-right fa fa-angle-right" ng-show="item.children" style="display: none; "></i>
                            </a>
                        </li><li ng-repeat="item in currentItem.parent.children" class="ng-scope">
                            <a>
                                <span ng-bind="item.label" class="ng-binding">Build Instructions</span>
                                <i class="pull-right fa fa-angle-right" ng-show="item.children"></i>
                            </a>
                        </li><li ng-repeat="item in currentItem.parent.children" class="ng-scope">
                            <a>
                                <span ng-bind="item.label" class="ng-binding">Install</span>
                                <i class="pull-right fa fa-angle-right" ng-show="item.children"></i>
                            </a>
                        </li><li ng-repeat="item in currentItem.parent.children" class="ng-scope">
                            <a>
                                <span ng-bind="item.label" class="ng-binding">Command Line Utility</span>
                                <i class="pull-right fa fa-angle-right" ng-show="item.children" style="display: none; "></i>
                            </a>
                        </li><li ng-repeat="item in currentItem.parent.children" class="ng-scope">
                            <a>
                                <span ng-bind="item.label" class="ng-binding">General Architecture</span>
                                <i class="pull-right fa fa-angle-right" ng-show="item.children"></i>
                            </a>
                        </li><li ng-repeat="item in currentItem.parent.children" class="ng-scope">
                            <a>
                                <span ng-bind="item.label" class="ng-binding">Library Modules</span>
                                <i class="pull-right fa fa-angle-right" ng-show="item.children"></i>
                            </a>
                        </li><li ng-repeat="item in currentItem.parent.children" class="ng-scope">
                            <a>
                                <span ng-bind="item.label" class="ng-binding">Scripting</span>
                                <i class="pull-right fa fa-angle-right" ng-show="item.children" style="display: none; "></i>
                            </a>
                        </li><li ng-repeat="item in currentItem.parent.children" class="ng-scope">
                            <a>
                                <span ng-bind="item.label" class="ng-binding">Specifications</span>
                                <i class="pull-right fa fa-angle-right" ng-show="item.children"></i>
                            </a>
                        </li>
                    </ul>
                    <ul class="nav nav-pills nav-stacked">
                        <li>
                            <a href="/documentation/latest/zorba" ng-click="previous()">
                                <i class="fa fa-angle-left"></i>
                                <span>Previous</span>
                            </a>
                        </li>
                        <!-- ngRepeat: item in currentItem.children --><li ng-repeat="item in currentItem.children" class="ng-scope">
                            <a ng-href="/documentation/latest/zorba/specifications/overview" ng-click="next(item)" href="/documentation/latest/zorba/specifications/overview">
                                <span ng-bind="item.label" class="ng-binding">Overview</span>
                                <i class="pull-right fa fa-angle-right" ng-show="item.children" style="display: none; "></i>
                            </a>
                        </li><li ng-repeat="item in currentItem.children" class="ng-scope">
                            <a ng-href="/documentation/latest/zorba/specifications/xqddf" ng-click="next(item)" href="/documentation/latest/zorba/specifications/xqddf">
                                <span ng-bind="item.label" class="ng-binding">Data Definition Facility</span>
                                <i class="pull-right fa fa-angle-right" ng-show="item.children" style="display: none; "></i>
                            </a>
                        </li><li ng-repeat="item in currentItem.children" class="ng-scope">
                            <a ng-href="/documentation/latest/zorba/specifications/options_and_annotations" ng-click="next(item)" href="/documentation/latest/zorba/specifications/options_and_annotations">
                                <span ng-bind="item.label" class="ng-binding">Zorba Specific Options and Annotations</span>
                                <i class="pull-right fa fa-angle-right" ng-show="item.children" style="display: none; "></i>
                            </a>
                        </li>
                    </ul>
                </div>
                
                <!-- Previous -->
                <div class="previous slideLeft" ng-show="panel.status === 'previous'" previous="" style="display: none; ">
                    <ul class="nav nav-pills nav-stacked">
                        <li ng-show="menu &amp;&amp; path.split('/').length &gt; 3">
                            <a ng-href="/documentation/latest/zorba" ng-click="previous()" href="/documentation/latest/zorba">
                                <i class="fa fa-angle-left"></i>
                                <span>Previous</span>
                            </a>
                        </li>
                        <!-- ngRepeat: item in currentItem.children --><li ng-repeat="item in currentItem.children" class="ng-scope">
                            <a href="/documentation/latest/zorba/specifications/overview" ng-click="next(item)">
                                <span ng-bind="item.label" class="ng-binding">Overview</span>
                                <i class="pull-right fa fa-angle-right" ng-show="item.children" style="display: none; "></i>
                            </a>
                        </li><li ng-repeat="item in currentItem.children" class="ng-scope">
                            <a href="/documentation/latest/zorba/specifications/xqddf" ng-click="next(item)">
                                <span ng-bind="item.label" class="ng-binding">Data Definition Facility</span>
                                <i class="pull-right fa fa-angle-right" ng-show="item.children" style="display: none; "></i>
                            </a>
                        </li><li ng-repeat="item in currentItem.children" class="ng-scope">
                            <a href="/documentation/latest/zorba/specifications/options_and_annotations" ng-click="next(item)">
                                <span ng-bind="item.label" class="ng-binding">Zorba Specific Options and Annotations</span>
                                <i class="pull-right fa fa-angle-right" ng-show="item.children" style="display: none; "></i>
                            </a>
                        </li>
                    </ul>
                    <ul class="nav nav-pills nav-stacked">
                        <li>
                            <a href="/documentation/latest" ng-click="previous()">
                                <i class="fa fa-angle-left"></i>
                                <span>Previous</span>
                            </a>
                        </li>
                        <!-- ngRepeat: item in panel.previous.children -->
                    </ul>
                </div>
            </div>
            </div>
        </div>
        <div class="content col-sm-8" ng-switch="" on="state" ng-class="{ 'col-sm-8': state !== 'notfound', 'col-sm-12': state === 'notfound' }">
            
                <ol class="breadcrumb">
                    <li>
                        <a ng-href="/documentation/latest" class="ng-binding" href="/documentation/latest">
                            Zorba 3.0 Documentation
                        </a>
                    </li>
                    <!-- ngRepeat: crumb in getBreadCrumbs() --><li ng-repeat="crumb in getBreadCrumbs()" ng-class="{ active: $last }" class="ng-scope">
                        <a ng-href="/documentation/latest/zorba" href="/documentation/latest/zorba">
                            <span ng-bind="crumb.label" class="ng-binding">End-User Docs</span>
                        </a>
                    </li><li ng-repeat="crumb in getBreadCrumbs()" ng-class="{ active: $last }" class="ng-scope">
                        <a ng-href="/documentation/latest/zorba/specifications" href="/documentation/latest/zorba/specifications">
                            <span ng-bind="crumb.label" class="ng-binding">Specifications</span>
                        </a>
                    </li><li ng-repeat="crumb in getBreadCrumbs()" ng-class="{ active: $last }" class="ng-scope active">
                        <a ng-href="/documentation/latest/zorba/specifications/options_and_annotations" href="/documentation/latest/zorba/specifications/options_and_annotations">
                            <span ng-bind="crumb.label" class="ng-binding">Zorba Specific Options and Annotations</span>
                        </a>
                    </li>
                </ol>
            
            <!-- ngSwitchWhen: loading -->
            <!-- ngSwitchWhen: zorba --><div ng-switch-when="zorba" class="ng-scope">
                <p>View as <a ng-href="http://bazaar.launchpad.net/~zorba-coders/zorba/trunk/view/head:/doc/zorba/options_and_annotations.dox" target="_blank" href="http://bazaar.launchpad.net/~zorba-coders/zorba/trunk/view/head:/doc/zorba/options_and_annotations.dox">source file</a> or <a ng-href="/documentation/3.0-Kratos/zorba/xml/options_and_annotations.xml" target="_blank" href="/documentation/3.0-Kratos/zorba/xml/options_and_annotations.xml">XML</a>.</p>
                <div ng-bind-html-unsafe="content" class="ng-binding"><div class="doxygen">
  <div><h1 class="title">Zorba Specific Options and Annotations</h1>
In XQuery, <a href="http://www.w3.org/TR/xquery-30/#id-option-declaration" target="_blank">options</a> and <a href="http://www.w3.org/TR/xquery-30/#id-annotations" target="_blank">annotations</a> can both be used to change the behavior of a particular implementation.Options provide a way to affect the behavior of modules. Annotations can be used to declare properties associated with functions, variables, collections, and indexes. In the following, we present the Zorba specific options and annotations. Also, we describe how they can be dealt with using the C++ API and the introspection module.<div id="option_introduction" class="sect1"><h2>Options</h2>
Options provide a way to affect the behavior of a particular XQuery module. They can be interpreted either by the XQuery processor itself or by the implementation of a particular module (i.e. an external function).The syntax for declaring options in the prolog of an XQuery module is<pre class="ace-static" ace-mode="xquery"><span class="normal"><span>&nbsp;</span><span>&nbsp;</span>OptionDecl<span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span>::=<span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span></span><span class="stringliteral">"declare"</span><span class="normal"><span>&nbsp;</span></span><span class="stringliteral">"option"</span><span class="normal"><span>&nbsp;</span>QName<span>&nbsp;</span>StringLiteral</span>
</pre>where QName is the name of the option and StringLiteral is the value that is assigned to this name.For example, the following declaration disables scripting support in the module that contains the option declaration.<pre class="ace-static" ace-mode="xquery"><span class="normal"><span>&nbsp;</span><span>&nbsp;</span>declare<span>&nbsp;</span></span><span class="keyword">namespace<span>&nbsp;</span></span><span class="normal">op<span>&nbsp;</span>=<span>&nbsp;</span></span><span class="stringliteral">"http://zorba.io/options/features"</span><span class="normal">;</span>
<span class="normal">
<span class="normal"><span>&nbsp;</span><span>&nbsp;</span>declare<span>&nbsp;</span>option<span>&nbsp;</span>op:disable<span>&nbsp;</span></span><span class="stringliteral">"scripting"</span><span class="normal">;</span>
</span></pre><div id="options_zorba" class="sect2"><h3>Available Options</h3>
Zorba provides a number of options which can be used to determine the behavior of a module. The namespace for all such options starts with . An error is raised (zerr:ZXQP0060) if a module declares an option with a namespace that is equal to or starts with this namespace but the local name refers to an option that is not known to Zorba.In the following, we describe the set of options available in Zorba.<div id="options_and_annotations_1options_features" class="sect3"><h4>Enabling or Disabling Features</h4>
Zorba provides a couple of extensions to XQuery. For example, the scripting extension and the data definition facility are both features not defined by the W3C but available in Zorba. The user can enable or disable any of these extensions using an option declaration, respectively. The URI of the names of these options is . The local name to enable a feature is <tt>enable</tt> and to disable a feature is <tt>disable</tt>, respectively. As a value, any of these options allows a comma separated list of feature names (QNames).For example, to disable the scripting and data definition facility feature, the following option declaration may be used:<pre class="ace-static" ace-mode="xquery"><span class="normal"><span>&nbsp;</span><span>&nbsp;</span>declare<span>&nbsp;</span></span><span class="keyword">namespace<span>&nbsp;</span></span><span class="normal">op<span>&nbsp;</span>=<span>&nbsp;</span></span><span class="stringliteral">"http://zorba.io/options/features"</span><span class="normal">;</span>
<span class="normal"><span>&nbsp;</span><span>&nbsp;</span>declare<span>&nbsp;</span></span><span class="keyword">namespace<span>&nbsp;</span></span><span class="normal">f<span>&nbsp;</span>=<span>&nbsp;</span></span><span class="stringliteral">"http://zorba.io/features"</span><span class="normal">;</span>
<span class="normal">
<span class="normal"><span>&nbsp;</span><span>&nbsp;</span>declare<span>&nbsp;</span>option<span>&nbsp;</span>op:disable<span>&nbsp;</span></span><span class="stringliteral">"f:scripting,<span>&nbsp;</span>f:ddl"</span><span class="normal">;</span>
</span></pre>If a given feature doesn't specify a prefix, the name is resolved against the default feature namespace . All Zorba specific features presented in the following are declared in this namespace.<ul>
<li>
<b>scripting:</b> This local name can be used to enable or disable the Zorba Scripting Extension. Per default, the feature is enabled.  </li>
<li>
<b>ddl:</b> The <tt>ddl</tt> local name refers to the static (language-level) Data Description Language portion of the <a href="/pages/3.0/zorba/xqddf">Data Definition Facility</a>. The feature is enabled by default.  </li>
<li>
<b>trace:</b> The <a href="http://www.w3.org/TR/xpath-functions-30/#func-trace" target="_blank">fn:trace</a> function can be used to retrieve an execution trace of a query. The local name <tt>trace</tt> can be used to disable execution trace printing, i.e. calls to fn:trace are eliminated. Per default, the feature is enabled.  </li>
<li>
<b>hof:</b> Higher-order functions will be introduced in the upcoming XQuery 3.0 recommendation. This feature is only partially implemented in Zorba. Hence, it is disabled by default. However, the local name <tt>hof</tt> can be used to enable the feature if requested.  </li>
<li>
<b>dtd:</b> The local name <tt>dtd</tt> can be used to enable or disable DTD validation when parsing resources retrieved by <a href="http://www.w3.org/TR/xpath-functions-30/#func-doc" target="_blank">fn:doc</a>. DTD validation is disabled by default.  </li>
<li>
<b>http-uri-resolution:</b> When resolving URIs for schema and module import statements, Zorba always first attempts to map the URI to a local filesystem location (see <a href="/pages/3.0/zorba/uriresolvers?anchor=builtin_uri_resolver">Zorba's Built-in URI Resolver</a>). As a fallback, Zorba will then by default attempt to use HTTP, HTTPS, or FTP (depending on the URI scheme) to download the resource from the internet. The local name <tt>http-uri-resolution</tt> can be used to enable or disable this network fallback. By default it is enabled. <div class="note">Because XQuery options must appear in queries after import statements, unfortunately the <tt>http-uri-resolution</tt> option can have no effect if it is specified inside query text. It must be specified using the C++ API or a Zorba command-line option. An error will be raised if this option is specified inside query text to avoid confusion. <simplesectsep>Also note that, unlike other features, this feature is always set or unset Zorba-wide. </simplesectsep></div>
</li>
</ul>
</div>
<div id="options_and_annotations_1options_Optimizations" class="sect3"><h4>Providing Optimizer Hints</h4>
Options can also be used to provide the Zorba optimizer with certain "hints". All options used for this purpose have a QName whose namespace URI is . For some hints, the optimizer needs to know only whether the hint should be applied or not; no additional information is required. For such hints, Zorba recognizes two options, whose local name is <tt>enable</tt> and <tt>disable</tt>, respectivaly, and whose value is a comma separated list of hint names.Currently, Zorba recognizes only one optimizer hint, called the for-serialization-only hint. It is used to tell the optimizer that the only operation that me be applied to the query result (i.e., to the sequence of items returned by the query) is serialization. With this knowledge, the optimizer may be able to apply optimizations that would not be possible otherwise. For example, it may be able to avoid the copying of nodes that are returned by an enclosed expression within a node constructor.The following query shows the usage of this hint. The query groups a number of sale records by country, and prints the sales in each country within a <pre class="ace-static" ace-mode="xquery"><span class="normal"><span>&nbsp;</span>&lt;country&gt;<span>&nbsp;</span></span>
</pre> tag whose name attribute gives the name of the associated country. The optimizer can use the for-serialization-only hint to avoid copying the $sale nodes when it constructs each of the new <pre class="ace-static" ace-mode="xquery"><span class="normal"><span>&nbsp;</span>&lt;country&gt;<span>&nbsp;</span></span>
</pre> nodes.<pre class="ace-static" ace-mode="xquery"><span class="normal">declare<span>&nbsp;</span></span><span class="keyword">namespace<span>&nbsp;</span></span><span class="normal">opt<span>&nbsp;</span>=<span>&nbsp;</span></span><span class="stringliteral">"http://zorba.io/options/optimizer"</span><span class="normal">;</span>
<span class="normal">
<span class="normal">declare<span>&nbsp;</span>option<span>&nbsp;</span>opt:enable<span>&nbsp;</span></span><span class="stringliteral">"for-serialization-only"</span><span class="normal">;</span>
<span class="normal">
<span class="normal"><span class="keywordflow">for</span><span class="normal"><span>&nbsp;</span>$sale<span>&nbsp;</span>in<span>&nbsp;</span>doc(</span><span class="stringliteral">"sales.xml"</span><span class="normal">)/sale</span>
<span class="normal">let<span>&nbsp;</span>$country<span>&nbsp;</span>:=<span>&nbsp;</span>$sale/country</span>
<span class="normal">group<span>&nbsp;</span>by<span>&nbsp;</span>$country</span>
<span class="normal"><span class="keywordflow">return</span><span class="normal"><span>&nbsp;</span>&lt;country<span>&nbsp;</span>name={$country}&gt;{$sale}&lt;/country&gt;</span>
</span></span></span></span></pre>The for-serialization-only hint can also be turned on or off via the use of the <a href="/pages/3.0/zorba/structZorba__CompilerHints">Zorba_CompilerHints</a> struct in the C++ API. Using an option declaration to enable or disable the hint overwrites the value stored in <a href="/pages/3.0/zorba/structZorba__CompilerHints">Zorba_CompilerHints</a>.</div>
<div id="options_and_annotations_1options_warning" class="sect3"><h4>Warnings in Zorba</h4>
Warnings are diagnostic messages that report constructions which are not inherently erroneous but which are risky or suggest there may have been an error. Analogous to errors, warnings are identified by QNames. Using options, the user can control whether a particular warning (or all warnings) is (are) enabled, disabled, or treated as an error.For example, given the following prolog, all warnings are treated as errors:<pre class="ace-static" ace-mode="xquery"><span class="normal"><span>&nbsp;</span><span>&nbsp;</span>declare<span>&nbsp;</span></span><span class="keyword">namespace<span>&nbsp;</span></span><span class="normal">op<span>&nbsp;</span>=<span>&nbsp;</span></span><span class="stringliteral">"http://zorba.io/options/warnings"</span><span class="normal">;</span>
<span class="normal"><span>&nbsp;</span><span>&nbsp;</span>declare<span>&nbsp;</span></span><span class="keyword">namespace<span>&nbsp;</span></span><span class="normal">w<span>&nbsp;</span>=<span>&nbsp;</span></span><span class="stringliteral">"http://zorba.io/warnings"</span><span class="normal">;</span>
<span class="normal">
<span class="normal"><span>&nbsp;</span><span>&nbsp;</span>declare<span>&nbsp;</span>option<span>&nbsp;</span>op:error<span>&nbsp;</span></span><span class="stringliteral">"w:all"</span><span class="normal">;</span>
</span></pre>If a given warning doesn't specify a prefix, the name is resolved against the default warning namespace . All Zorba specific warnings are defined in this namespace. A comprehensive list of warnings is contained at the end of the C++ header file <a href="/pages/3.0/zorba/diagnostic__list_8h">diagnostic_list.h</a>.The following snippet causes the warning <tt>ZWST0002</tt> (warn for unknown annotations) to be suppressed:<pre class="ace-static" ace-mode="xquery"><span class="normal"><span>&nbsp;</span><span>&nbsp;</span>declare<span>&nbsp;</span></span><span class="keyword">namespace<span>&nbsp;</span></span><span class="normal">op<span>&nbsp;</span>=<span>&nbsp;</span></span><span class="stringliteral">"http://zorba.io/options/warnings"</span><span class="normal">;</span>
<span class="normal">
<span class="normal"><span>&nbsp;</span><span>&nbsp;</span>declare<span>&nbsp;</span>option<span>&nbsp;</span>op:disable<span>&nbsp;</span></span><span class="stringliteral">"ZWST0002"</span><span class="normal">;</span>
</span></pre></div>
<div id="options_and_annotations_1options_versioning" class="sect3"><h4>Zorba Module Versioning</h4>
Zorba provides a way that allows the developer of a module to specify a version of his module without changing the target namespace. An importing module can specify restriction on the version of a module it wants to use. This allows developers to easily declare dependencies between particular versions of a module. In addition, a module can specify on which version of Zorba it depends. Details about module versioning can be found at <a href="/pages/3.0/zorba/modules_using?anchor=mod_versioning">Versioning Modules</a>.The options to declare the module and zorba version are listed here for completeness.To declare version 2.5 of a module that depends on version 2.0 of Zorba, the following option declaration may be used.<pre class="ace-static" ace-mode="xquery"><span class="normal">declare<span>&nbsp;</span></span><span class="keyword">namespace<span>&nbsp;</span></span><span class="normal">ver<span>&nbsp;</span>=<span>&nbsp;</span></span><span class="stringliteral">"http://zorba.io/options/versioning"</span><span class="normal">;</span>
<span class="normal">declare<span>&nbsp;</span>option<span>&nbsp;</span>ver:module-version<span>&nbsp;</span></span><span class="stringliteral">"2.5"</span><span class="normal">;</span>
<span class="normal">declare<span>&nbsp;</span>option<span>&nbsp;</span>ver:zorba-version<span>&nbsp;</span></span><span class="stringliteral">"2.0"</span><span class="normal">;</span>
</pre></div>
</div>
<div id="options_introspection" class="sect2"><h3>Introspecting Options in XQuery</h3>
In a module, the introspection module of Zorba can be used to get the value of an option that is declared.Specifically, the following function retrieves the value of an option that is declared in the prolog of the module. The function returns the empty sequence if the option is not contained in the static context.<pre class="ace-static" ace-mode="xquery"><span class="normal">declare<span>&nbsp;</span></span><span class="keyword">function</span><span class="normal"><span>&nbsp;</span>sctx:option($name<span>&nbsp;</span><a href="/pages/3.0/zorba/namespacezorba_1_1locale_1_1iso639__1?anchor=aafd6e55905dc8efe50a3f9fd38616781a1dea282b8d50cca16d5e6f8faef7d9d0">as</a><span>&nbsp;</span>xs:QName)<span>&nbsp;</span><a href="/pages/3.0/zorba/namespacezorba_1_1locale_1_1iso639__1?anchor=aafd6e55905dc8efe50a3f9fd38616781a1dea282b8d50cca16d5e6f8faef7d9d0">as</a><span>&nbsp;</span>xs:</span><span class="keywordtype">string</span><span class="normal">?<span>&nbsp;</span>external;</span>
</pre></div>
<div id="options_available" class="sect2"><h3>Options in Host Languages and External Functions</h3>
Besides declaring an option in the prolog of a module, options can also be declared or retrieved using the StaticContext representation in any of the language bindings (i.e. C++, C, PHP, Ruby, Python, or Java).For instance, the C++ API provides the following two functions to retrieve the value of an option declared in a query and declare options to be used in a query, respectively.<ul>
<li>
bool StaticContext::getOption( const Item&amp; aQName, String&amp; aOptionValue) const; </li>
<li>
void StaticContext::declareOption( const Item&amp; aQName, const String&amp; aOptionValue); </li>
</ul>
For example, the following code snippet depicts how the higher-order function feature can be enabled for all modules compiled with the given static context.<pre class="ace-static" ace-mode="xquery"><span class="normal"><a href="/pages/3.0/zorba/classzorba_1_1SmartPtr">zorba::StaticContext_t</a><span>&nbsp;</span>lContext<span>&nbsp;</span>=<span>&nbsp;</span>zorba-&gt;createStaticContext();</span>
<span class="normal">
<span class="normal"><a href="/pages/3.0/zorba/classzorba_1_1Item">zorba::Item</a><span>&nbsp;</span>lEnable<span>&nbsp;</span>=<span>&nbsp;</span>zorba-&gt;getItemFactory()-&gt;createQName(</span>
<span class="normal"><span>&nbsp;</span><span>&nbsp;</span></span><span class="stringliteral">"http://zorba.io/options/features"</span><span class="normal">,<span>&nbsp;</span></span><span class="stringliteral">""</span><span class="normal">,<span>&nbsp;</span></span><span class="stringliteral">"enable"</span><span class="normal">);</span>
<span class="normal">
<span class="normal">lContext-&gt;declareOption(lEnable,<span>&nbsp;</span></span><span class="stringliteral">"hof"</span><span class="normal">);</span>
<span class="normal">
<span class="normal"><a href="/pages/3.0/zorba/classzorba_1_1SmartPtr">zorba::XQuery_t</a><span>&nbsp;</span>lQuery<span>&nbsp;</span>=<span>&nbsp;</span>zorba-&gt;compileQuery(</span><span class="stringliteral">"1+1"</span><span class="normal">,<span>&nbsp;</span>lContext);</span>
</span></span></span></pre>Declaring and retrieving the value of an option is particularly useful in external functions. The developer of an external function can retrieve the value of an option (from the static context passed to the function). This way, she can customize the behavior of her function.</div>
</div>
<div id="annotation_introduction" class="sect1"><h2>Annotations</h2>
In XQuery (starting with version 3.0) <a href="http://www.w3.org/TR/xquery-30/#id-annotations" target="_blank">annotations</a> may be used to properties associated with functions and variables. Zorba also uses annotations for collections and indexes. Annotations are <tt>(QName, value)</tt> pairs. The prefix of the QName is resolved using the statically known namespaces. If no prefix is present, the name is the default function namespace.<div id="annotations_available" class="sect2"><h3>Available Annotations</h3>
<div id="options_and_annotations_1xquery_annotations" class="sect3"><h4>XQuery 3.0 Annotation</h4>
XQuery 3.0 itself defines two annotations: <tt>fn:public</tt> and <tt>fn:private</tt>. Those annotations allow the user to declare a function or a variable as public or private, respectively. A private variable or function is hidden from a module import. That is, it can not be used in the importing module.For example, a function declared a module as follows, can not be used in a module which imports the <tt>mymodule</tt> module:<pre class="ace-static" ace-mode="xquery"><span class="normal">declare<span>&nbsp;</span>%</span><span class="keyword">private</span><span class="normal"><span>&nbsp;</span></span><span class="keyword">function</span><span class="normal"><span>&nbsp;</span>mymodule:foo()<span>&nbsp;</span>{<span>&nbsp;</span></span><span class="stringliteral">"foo"</span><span class="normal"><span>&nbsp;</span>};</span>
</pre></div>
<div id="options_and_annotations_1zorba_annotations" class="sect3"><h4>Zorba Specific Annotations</h4>
Zorba provides a number of annotations that allow the user to define the semantics of functions, variables, collections, and indexes. All these annotations have the namespace .<div id="options_and_annotations_1deterministic_annotation" class="sect4"><h5>Deterministic and Nondeterministic Functions</h5>
A deterministic function is a function that always evaluates to the same result if it is invoked multiple times with the same arguments during the evaluation of a <a href="/scripting-spec?anchor=id-snapshot-scope" target="_blank">snapshot</a>. In general, all functions defined by XQuery are deterministic. However, a module developer might develop a function (in a host language) which does not guarantee to be deterministic. For example, a function generating random numbers is clearly not deterministic. Knowing about this property is crucial for the query optimizer to retain the semantics (e.g. caching would lead to incorrect results).For this reason, Zorba provides two annotations (<tt>nondeterministic</tt> and <tt>deterministic</tt>) that allow a developer to declare whether a function is deterministic or not.As an example, the following snippet declares a nondeterministic random function.<pre class="ace-static" ace-mode="xquery"><span class="normal">declare<span>&nbsp;</span></span><span class="keyword">namespace<span>&nbsp;</span></span><span class="normal"><a href="/pages/3.0/zorba/namespacezorba_1_1locale_1_1iso639__1?anchor=aafd6e55905dc8efe50a3f9fd38616781abdd3c2de1222fd3167e2675969aa694c">an</a><span>&nbsp;</span>=<span>&nbsp;</span></span><span class="stringliteral">"http://zorba.io/annotations"</span><span class="normal">;</span>
<span class="normal">
<span class="normal">declare<span>&nbsp;</span>%<a href="/pages/3.0/zorba/namespacezorba_1_1locale_1_1iso639__1?anchor=aafd6e55905dc8efe50a3f9fd38616781abdd3c2de1222fd3167e2675969aa694c">an</a>:nondeterministic<span>&nbsp;</span></span><span class="keyword">function</span><span class="normal"><span>&nbsp;</span>random:random()<span>&nbsp;</span><a href="/pages/3.0/zorba/namespacezorba_1_1locale_1_1iso639__1?anchor=aafd6e55905dc8efe50a3f9fd38616781a1dea282b8d50cca16d5e6f8faef7d9d0">as</a><span>&nbsp;</span>xs:integer<span>&nbsp;</span>external;</span>
</span></pre>If not specified otherwise, all functions are being treated as deterministic. If some function invokes a nondeterministic function, the invoking function itself must also be declared as nondeterministc, otherwise zerr::ZXQP0040 is raised.</div>
<div id="options_and_annotations_1sequential_annotation" class="sect4"><h5>Sequential Functions</h5>
In XQuery 3.0, an expression never has any side effects other than constructing new nodes (not even updating expressions, which merely produce a pending update list). Zorba Scripting programs may have side effects. Side effects can be made with statements. An expression is sequential if it contains statements that have side effects (updating some XML, assigning a variable in scope outside of the expression) or that affect the control flow (break, continue, exit returning), or if it invokes a sequential function. Analogously to nondeterministic functions, the compiler needs to be able to infer if an expression is sequential. In order to do so, Zorba provides the <tt>an:sequential</tt> and <tt>an:nonsequential</tt> annotations. The <tt>an:sequential</tt> annotation must be used to declare (external) functions that have side effects. If non of these annotations is present, the default for a function is to be annotated as <tt>an:nonsequential</tt>. If a function invokes a sequential function but is itself not declared sequential (i.e. no annotation or <tt>an:nonsequential</tt>), an error is raised (zerr:XSST0004).For example, the  function of the http-client module is declared as sequential because invoking it might cause a side effect (e.g. a payment with paypal).<pre class="ace-static" ace-mode="xquery"><span class="normal">declare<span>&nbsp;</span>%<a href="/pages/3.0/zorba/namespacezorba_1_1locale_1_1iso639__1?anchor=aafd6e55905dc8efe50a3f9fd38616781abdd3c2de1222fd3167e2675969aa694c">an</a>:sequential<span>&nbsp;</span></span><span class="keyword">function</span><span class="normal"><span>&nbsp;</span>http:post(</span>
<span class="normal"><span>&nbsp;</span><span>&nbsp;</span>$href<span>&nbsp;</span><a href="/pages/3.0/zorba/namespacezorba_1_1locale_1_1iso639__1?anchor=aafd6e55905dc8efe50a3f9fd38616781a1dea282b8d50cca16d5e6f8faef7d9d0">as</a><span>&nbsp;</span>xs:</span><span class="keywordtype">string</span><span class="normal">,</span>
<span class="normal"><span>&nbsp;</span><span>&nbsp;</span>$body<span>&nbsp;</span><a href="/pages/3.0/zorba/namespacezorba_1_1locale_1_1iso639__1?anchor=aafd6e55905dc8efe50a3f9fd38616781a1dea282b8d50cca16d5e6f8faef7d9d0">as</a><span>&nbsp;</span>item(),</span>
<span class="normal"><span>&nbsp;</span><span>&nbsp;</span>$content-<a href="/pages/3.0/zorba/namespacezorba_1_1time_1_1calendar?anchor=a7c8c84a1ed5401ddae49da3f01861c87">type</a><span>&nbsp;</span><a href="/pages/3.0/zorba/namespacezorba_1_1locale_1_1iso639__1?anchor=aafd6e55905dc8efe50a3f9fd38616781a1dea282b8d50cca16d5e6f8faef7d9d0">as</a><span>&nbsp;</span>xs:</span><span class="keywordtype">string</span><span class="normal">)<span>&nbsp;</span><a href="/pages/3.0/zorba/namespacezorba_1_1locale_1_1iso639__1?anchor=aafd6e55905dc8efe50a3f9fd38616781a1dea282b8d50cca16d5e6f8faef7d9d0">as</a><span>&nbsp;</span>item()+<span>&nbsp;</span>{<span>&nbsp;</span>...<span>&nbsp;</span>}</span>
</pre></div>
<div id="options_and_annotations_1assignable_annotation" class="sect4"><h5>Assignable and Nonassignale Variables</h5>
In plain XQuery without scripting, global variables (i.e. those declared in the prolog of a module) can not be assigned a value. In scripting (i.e. if the scripting feature is enabled), however, values can be assigned to a variable.In order to allow the developer to prevent variable assignments (even with scripting), Zorba provides the <tt>an:nonassignable</tt> annotation.For example, preventing a variable from being assigned in scripting mode could be done as follows:<pre class="ace-static" ace-mode="xquery"><span class="normal">declare<span>&nbsp;</span></span><span class="keyword">namespace<span>&nbsp;</span></span><span class="normal"><a href="/pages/3.0/zorba/namespacezorba_1_1locale_1_1iso639__1?anchor=aafd6e55905dc8efe50a3f9fd38616781abdd3c2de1222fd3167e2675969aa694c">an</a><span>&nbsp;</span>=<span>&nbsp;</span></span><span class="stringliteral">"http://zorba.io/annotations"</span><span class="normal">;</span>
<span class="normal">
<span class="normal">declare<span>&nbsp;</span>%<a href="/pages/3.0/zorba/namespacezorba_1_1locale_1_1iso639__1?anchor=aafd6e55905dc8efe50a3f9fd38616781abdd3c2de1222fd3167e2675969aa694c">an</a>:nonassignable<span>&nbsp;</span>variable<span>&nbsp;</span>$var<span>&nbsp;</span>:=<span>&nbsp;</span>3;</span>
</span></pre>If a value is assigned to a nonassignable variable, the error <tt>XSST0007</tt> in the Zorba error namespace is raised.</div>
<div id="options_and_annotations_1variadic_annotation" class="sect4"><h5>Variadic Functions</h5>
A function annotated with the <tt>an:variadic</tt> annotation is a function of indefinite arity, i.e. one that accepts a variable number of arguments.For example, the function to create an unordered map with an arbitrary number of key types (see module <a href="/modules/latest/zorba.io/modules/store/data-structures/unordered-map" target="_blank">http://zorba.io/modules/store/data-structures/unordered-map</a>) is declared as follow:<pre class="ace-static" ace-mode="xquery"><span class="normal">declare<span>&nbsp;</span>%<a href="/pages/3.0/zorba/namespacezorba_1_1locale_1_1iso639__1?anchor=aafd6e55905dc8efe50a3f9fd38616781abdd3c2de1222fd3167e2675969aa694c">an</a>:variadic<span>&nbsp;</span>%<a href="/pages/3.0/zorba/namespacezorba_1_1locale_1_1iso639__1?anchor=aafd6e55905dc8efe50a3f9fd38616781abdd3c2de1222fd3167e2675969aa694c">an</a>:sequential<span>&nbsp;</span></span><span class="keyword">function</span><span class="normal"><span>&nbsp;</span>map:create(</span>
<span class="normal"><span>&nbsp;</span><span>&nbsp;</span>$name<span>&nbsp;</span><a href="/pages/3.0/zorba/namespacezorba_1_1locale_1_1iso639__1?anchor=aafd6e55905dc8efe50a3f9fd38616781a1dea282b8d50cca16d5e6f8faef7d9d0">as</a><span>&nbsp;</span>xs:QName,</span>
<span class="normal"><span>&nbsp;</span><span>&nbsp;</span>$key-<a href="/pages/3.0/zorba/namespacezorba_1_1time_1_1calendar?anchor=a7c8c84a1ed5401ddae49da3f01861c87">type</a><span>&nbsp;</span><a href="/pages/3.0/zorba/namespacezorba_1_1locale_1_1iso639__1?anchor=aafd6e55905dc8efe50a3f9fd38616781a1dea282b8d50cca16d5e6f8faef7d9d0">as</a><span>&nbsp;</span>xs:QName)<span>&nbsp;</span><a href="/pages/3.0/zorba/namespacezorba_1_1locale_1_1iso639__1?anchor=aafd6e55905dc8efe50a3f9fd38616781a1dea282b8d50cca16d5e6f8faef7d9d0">as</a><span>&nbsp;</span>empty-sequence()<span>&nbsp;</span>external;</span>
</pre></div>
<div id="options_and_annotations_1streamable_annotation" class="sect4"><h5>Streamable Strings</h5>
A function annotated with the <tt>streamable</tt> annotation is a function that may return an xs:string item whose content is streamed. Such a string is called a streamable string. They have the advantage that their contents does not need to be materialized in memory. If a function consuming such a string is able to process the string in a streaming fashion, this allows for processing of strings with a virtually infinite length.For example, the following XQuery code, reads a file from disk and returns the contents to the standard output of the calling process. Because the <a href="file:read-text" target="_blank">file:read-text</a> function is annotated using the <tt>streamable</tt> annotation, the file does not have to be materialized in memory.<pre class="ace-static" ace-mode="xquery"><span class="keyword">import</span><span class="normal"><span>&nbsp;</span>module<span>&nbsp;</span></span><span class="keyword">namespace<span>&nbsp;</span></span><span class="normal"><a href="/pages/3.0/zorba/namespacezorba_1_1fs?anchor=a33bc6a07dd3ac39c5107606fc21bea22ad51f6a8152afdfbcf0e0dd0d1c86cee0">file</a><span>&nbsp;</span>=<span>&nbsp;</span></span><span class="stringliteral">"http://expath.org/ns/file"</span><span class="normal">;</span>
<span class="normal">
<span class="normal"><a href="/pages/3.0/zorba/namespacezorba_1_1fs?anchor=a33bc6a07dd3ac39c5107606fc21bea22ad51f6a8152afdfbcf0e0dd0d1c86cee0">file</a>:read-text(</span><span class="stringliteral">"big_file.txt"</span><span class="normal">)</span>
</span></pre>However, the disadvantage is that a streamable string can only be consumed exactly once. If a streamable string is consumed more than once, an error is raised. In order to enable multiple consumers of a streamable string, the materialize function of the string module (<a href="/modules/latest/zorba.io/modules/string" target="_blank">http://zorba.io/modules/string</a>) should be used to materialize the entire contents in an (regular) xs:string item.<pre class="ace-static" ace-mode="xquery"><span class="keyword">import</span><span class="normal"><span>&nbsp;</span>module<span>&nbsp;</span></span><span class="keyword">namespace<span>&nbsp;</span></span><span class="normal"><a href="/pages/3.0/zorba/namespacezorba_1_1fs?anchor=a33bc6a07dd3ac39c5107606fc21bea22ad51f6a8152afdfbcf0e0dd0d1c86cee0">file</a><span>&nbsp;</span>=<span>&nbsp;</span></span><span class="stringliteral">"http://expath.org/ns/file"</span><span class="normal">;</span>
<span class="normal"><span class="keyword">import</span><span class="normal"><span>&nbsp;</span>module<span>&nbsp;</span></span><span class="keyword">namespace<span>&nbsp;</span></span><span class="normal">string<span>&nbsp;</span>=<span>&nbsp;</span></span><span class="stringliteral">"http://zorba.io/modules/string"</span><span class="normal">;</span>
<span class="normal">
<span class="normal">let<span>&nbsp;</span>$x<span>&nbsp;</span>:=<span>&nbsp;</span></span><span class="keywordtype">string</span><span class="normal">:materialize(<a href="/pages/3.0/zorba/namespacezorba_1_1fs?anchor=a33bc6a07dd3ac39c5107606fc21bea22ad51f6a8152afdfbcf0e0dd0d1c86cee0">file</a>:read-text(</span><span class="stringliteral">"myfile.txt"</span><span class="normal">)))</span>
<span class="normal"><span class="keywordflow">return</span><span class="normal"><span>&nbsp;</span>($x,<span>&nbsp;</span>$x)</span>
</span></span></span></pre>In this example, the  function returns a streamable string whose contents is used twice in the query. In order to be able to use the value twice, the <tt>string:materialize</tt> function must be used to materialize the entire contents of the file <tt>myfile.txt</tt> in memory. Otherwise, the error zerr:ZSTR0055 is raised.</div>
<div id="options_and_annotations_1caching_annotation" class="sect4"><h5>Caching Results of Functions</h5>
Caching of function results may improve performance when computationally expensive functions are invoked multiple times with the same arguments.If the optimization level is O1 or higher, Zorba automatically caches results of recursive, deterministic, and non-sequential functions whose parameter and return types are subtypes of xs:anyAtomicType. Specifically, if such a function is called more than once with the same arguments, the result of the first call will be cached and subsequent calls will return the cached value without re-evaluating the function.For example, in the following recursive function computing a fibonacci number, each result is automatically cached and, hence, dramatically improves performance.<pre class="ace-static" ace-mode="xquery"><span class="normal">declare<span>&nbsp;</span></span><span class="keyword">function</span><span class="normal"><span>&nbsp;</span>local:fib($n<span>&nbsp;</span><a href="/pages/3.0/zorba/namespacezorba_1_1locale_1_1iso639__1?anchor=aafd6e55905dc8efe50a3f9fd38616781a1dea282b8d50cca16d5e6f8faef7d9d0">as</a><span>&nbsp;</span>xs:integer)<span>&nbsp;</span><a href="/pages/3.0/zorba/namespacezorba_1_1locale_1_1iso639__1?anchor=aafd6e55905dc8efe50a3f9fd38616781a1dea282b8d50cca16d5e6f8faef7d9d0">as</a><span>&nbsp;</span>xs:integer</span>
<span class="normal">{</span>
<span class="normal"><span>&nbsp;</span><span>&nbsp;</span></span><span class="keywordflow">if</span><span class="normal"><span>&nbsp;</span>($n<span>&nbsp;</span>eq<span>&nbsp;</span>0)<span>&nbsp;</span>then<span>&nbsp;</span>0<span>&nbsp;</span></span>
<span class="normal"><span>&nbsp;</span><span>&nbsp;</span></span><span class="keywordflow">else</span><span class="normal"><span>&nbsp;</span></span><span class="keywordflow">if</span><span class="normal"><span>&nbsp;</span>($n<span>&nbsp;</span>eq<span>&nbsp;</span>1)<span>&nbsp;</span>then<span>&nbsp;</span>1<span>&nbsp;</span></span>
<span class="normal"><span>&nbsp;</span><span>&nbsp;</span></span><span class="keywordflow">else</span><span class="normal"><span>&nbsp;</span>local:fib($n<span>&nbsp;</span>-<span>&nbsp;</span>1)<span>&nbsp;</span>+<span>&nbsp;</span>local:fib($n<span>&nbsp;</span>-<span>&nbsp;</span>2)</span>
<span class="normal">};</span>
<span class="normal">
<span class="normal">local:fib(100)</span>
</span></pre>Specifically, this optimization reduces the complexity of the function from O(1.6^n) to O(n).In order to explicitly disable function caching, the user can specify the <tt>an:no-cache</tt> annotation.In addition, the user can use the <tt>an:cache</tt> annotation to cache the results of functions other than the ones that are automatically cached. However, this will only work if the function is not updating and its parameter and return types are subtypes of xs:anyAtomicType; otherwise, Zorba will raise a warning (zwarn:ZWST0005) and simply ignore the an:cache annotation.Please note, that explicitly enforcing caching for sequential or nondeterministic functions might not give the intended result. In such cases, Zorba will raise a warning (zwarn:ZWST0006) but obey the an:cache annotation.</div>
<div id="options_and_annotations_1no_copy_rule_annotation" class="sect4"><h5>Avoiding Node Copying in Node Constructors.</h5>
According to the XQuery specification, any nodes (and their subtrees) returned by an enclosed expression appearing inside a node constructor must be copied, and it is the copied subtrees that are then connected to the newly constructed node. However, such copying is not always necessary. If no copying is done, then some nodes will be "shared" by multiple trees. XML trees that do not contain any shared nodes will be referred to as "stand-alone trees".Whether node copying is really necessary or not depends on the kind of operations that are going to be performed on the nodes and their associated trees after the node construction. For example, copying is necessary if any operations involving node identity, document ordering, or reverse axis traversals are to be performed on the newly constructed tree. Copying is also necessary if the relevant nodes may be involved in a later update operation. The Zorba optimizer is able to analyze the query expressions and determine automatically whether copying is required or not. However, the optimizer needs some help from the user in the case of external functions, because it cannot look into the operations of such functions. For this, Zorba provides two annotations that users may annotate their external functions with in order to help the optimizer determine whether to copy nodes or not.<ul>
<li>
<b>an:must-copy-input-nodes</b>. This annotation has an associated value, which is a list of integer literals. The meaning of the annotation is the following: If a number N appears in the value, then the function requires that any nodes that are bound to the N-th parameter when the function is called, must belong to standalone trees (because the function is going to perform on such nodes an operation that requires standalone trees). As a result of this information, the optimizer makes sure that node copying is done during any node constructor whose result (or any subtree of it) may be given as input to such an external function.  </li>
<li>
<b>an:propagates-input-nodes</b>. This annotation has an associated value, which is a list of integer literals. The meaning of the annotation is the following: If a number N appears in the value, then the function may return to its caller a node n that is bound to the N-th parameter, or a node in the subtree of n. This annotation helps the optimizer determine whether nodes consumed by an expression are coming from a node constructor, so that if the expression requires stand-alone trees, then the optimizer will make sure that the relevant node constructor does copy nodes.  </li>
</ul>
The absence of any of the above annotations from an external function declaration is treated as if the annotation was present with a value listing all the numbers between 1 and M, where M is the function arity.</div>
<div id="options_and_annotations_1collection_index_annotations" class="sect4"><h5>Annotations on Collections and Indexes</h5>
The <a href="/pages/3.0/zorba/xqddf">Data Definition Facility</a> uses annotations to assign properties to collections and indexes. For example, annotations can be used to specify that a collection is unordered or that an index is a value equality index.The semantics of each of the annotations is given in the documentation about the XQuery Data Definition Facility. However, for completeness, we also list all of the annotations here.<ul>
<li>
<b>an:mutable, an:queue, an:append-only, an:const</b> Determines whether a collection is mutable, queue (FIFO), append-only, or const (not mutable). The default annotation is mutable. </li>
<li>
<b>an:ordered, an:unordered</b> Annotations to specify whether the order of nodes in a collection must be preserved. The default is ordered.</li>
<li>
<b>an:read-only-nodes, an:mutable-nodes</b> If a collection is annotated with read-only-nodes, the nodes in the collection can not be modified using the XQuery Update Facility. The default is an:mutable-nodes.</li>
<li>
<b>an:unique, an:nonunique</b> Unique indexes make sure that the relationship between index keys and values is one-to-one. The default is an:nonunique.</li>
<li>
<b>an:value-equality, an:value-range, an:general-range, an:general-equality</b> Determine whether the index is a value or general equality or value range index, respectively. The default is an:value-equality.</li>
<li>
<b>an:automatic, an:manual</b> If an index is declared as automatic, Zorba guarantees that the index is maintained automatically. The default is an:manual.</li>
</ul>
</div>
</div>
</div>
<div id="annotations_introspection" class="sect2"><h3>Introspecting Function Annotations</h3>
Analog to options, the introspection module of that comes with Zorba allows you to retrieve all annotations declared for a particular function.<pre class="ace-static" ace-mode="xquery"><span class="normal">declare<span>&nbsp;</span></span><span class="keyword">function</span><span class="normal"><span>&nbsp;</span>sctx:</span><span class="keyword">function</span><span class="normal">-annotations(</span>
<span class="normal"><span>&nbsp;</span><span>&nbsp;</span>$name<span>&nbsp;</span><a href="/pages/3.0/zorba/namespacezorba_1_1locale_1_1iso639__1?anchor=aafd6e55905dc8efe50a3f9fd38616781a1dea282b8d50cca16d5e6f8faef7d9d0">as</a><span>&nbsp;</span>xs:QName,</span>
<span class="normal"><span>&nbsp;</span><span>&nbsp;</span>$arity<span>&nbsp;</span><a href="/pages/3.0/zorba/namespacezorba_1_1locale_1_1iso639__1?anchor=aafd6e55905dc8efe50a3f9fd38616781a1dea282b8d50cca16d5e6f8faef7d9d0">as</a><span>&nbsp;</span>xs:integer)<span>&nbsp;</span><a href="/pages/3.0/zorba/namespacezorba_1_1locale_1_1iso639__1?anchor=aafd6e55905dc8efe50a3f9fd38616781a1dea282b8d50cca16d5e6f8faef7d9d0">as</a><span>&nbsp;</span>xs:QName*<span>&nbsp;</span>external;</span>
</pre></div>
</div>
<div id="pragma_introduction" class="sect1"><h2>Extension Expressions</h2>
An extension expression consists of one or more pragmas, followed by an expression enclosed in curly braces. A pragma might be used to modify the behavior or semantics of the expression enclosed in curly braces. Pragmas are denoted by the delimiters (# and #), and consists of an identifying EQName. Zorba recognizes pragmas having the namespace . Specifically, Zorba recognizes the following pragmas:<ul>
<li>
<b>no-copy</b> In order to indicate that a node that should be inserted into a collection does not need to be copied before inserting it. Not copying a node improves performance. However, the user needs to make sure that the node does not have a parent and is not modified in any other expression. For example, in the following example snippet, the node refered to by <tt>$n</tt> will not be copied before insertion into the collection. <pre class="ace-static" ace-mode="xquery"><span class="keyword">import</span><span class="normal"><span>&nbsp;</span>module<span>&nbsp;</span></span><span class="keyword">namespace<span>&nbsp;</span></span><span class="normal">db<span>&nbsp;</span>=<span>&nbsp;</span></span><span class="stringliteral">"http://zorba.io/modules/store/dynamic/collections/dml"</span><span class="normal">;</span>
<span class="normal">
<span class="normal">declare<span>&nbsp;</span></span><span class="keyword">namespace<span>&nbsp;</span></span><span class="normal">ext<span>&nbsp;</span>=<span>&nbsp;</span></span><span class="stringliteral">"http://zorba.io/extensions"</span><span class="normal">;</span>
<span class="normal">
<span class="normal">let<span>&nbsp;</span>$n<span>&nbsp;</span>:=<span>&nbsp;</span>&lt;a/&gt;</span>
<span class="normal"><span class="keywordflow">return</span><span class="normal"><span>&nbsp;</span>(#<span>&nbsp;</span>ext:<a href="/pages/3.0/zorba/namespacezorba_1_1internal_1_1ztd_1_1has__insertion__operator__impl?anchor=a02a523cf236289acec6640afe9070191">no</a>-copy<span>&nbsp;</span>#)<span>&nbsp;</span>{<span>&nbsp;</span>$n<span>&nbsp;</span><a href="/pages/3.0/zorba/namespacezorba_1_1locale_1_1iso639__1?anchor=aafd6e55905dc8efe50a3f9fd38616781a11cc1dd79aff8b41628c4f17295d25a7">is</a><span>&nbsp;</span><span>&nbsp;</span>db:apply-insert-last(xs:QName(</span><span class="stringliteral">"local:bar"</span><span class="normal">),<span>&nbsp;</span>$n)<span>&nbsp;</span>}</span>
</span></span></span></pre>  </li>
</ul>
</div>
    </div>
</div></div>
                <div id="disqus" class="disqus" disqus="">
                    <div id="disqus_thread" class="content-panel-content"><iframe id="dsq-2" data-disqus-uid="2" allowtransparency="true" frameborder="0" tabindex="0" title="Disqus" style="width: 100% !important; border-top-style: none !important; border-right-style: none !important; border-bottom-style: none !important; border-left-style: none !important; border-width: initial !important; border-color: initial !important; overflow-x: hidden !important; overflow-y: hidden !important; height: 928px !important; " width="100%" src="http://disqus.com/embed/comments/?disqus_version=1df9d712&amp;base=default&amp;f=28msec&amp;t_i=%2Fdocumentation%2Flatest%2Fzorba%2Fspecifications%2Foptions_and_annotations%2F&amp;t_u=http%3A%2F%2Fwww.28.io%2Fdocumentation%2Flatest%2Fzorba%2Fspecifications%2Foptions_and_annotations%2F&amp;t_d=Zorba%20-%20The%20NoSQL%20Query%20Processor&amp;t_t=Zorba%20-%20The%20NoSQL%20Query%20Processor&amp;s_o=default#2" scrolling="no" horizontalscrolling="no" verticalscrolling="no"></iframe></div>
                </div>
            </div>
            <!-- ngSwitchWhen: api -->
            <!-- ngSwitchWhen: modules -->
            <!-- ngSwitchWhen: notfound -->
            <!-- ngSwitchDefault:  -->
        </div>
    </div>
</div></div>
        <footer id="footer">
            <div class="container">
                <div class="row">
                    <div class="col-sm-4">
                        <h3>Get Involved</h3>
                        <ul>
                            <li><a href="https://groups.google.com/forum/#!forum/zorba-users" target="_blank">Users List on Google Groups</a></li>
                            <li><a href="https://groups.google.com/forum/#!forum/zorba-dev" target="_blank">Developers List on Google Groups</a></li>
                            <li><a href="https://bugs.launchpad.net/zorba/+bugs" target="_blank">Bug Tracker</a></li>
                        </ul>
                    </div>
                    <div class="col-sm-4">
                        <h3>Resources</h3>
                        <li><a href="http://jsoniq.org" target="_blank">JSONiq</a></li>
                        <li><a href="http://www.w3.org/TR/xquery-30/" target="_blank">XQuery 3.0</a></li>
                    </div>
                    <div class="col-sm-4">
                        <h3>Quick Links</h3>
                        <li><a href="https://code.launchpad.net/zorba" target="_blank">Source Code</a></li>
                        <li><a href="/download">Download</a></li>
                        <li><a href="/blog">Blog</a></li>
                    </div>
                </div>
                <p class="text-center copyright">
                    <small>
                    ©&nbsp;2013 Zorba.
                    </small>
                </p>
            </div>        
        </footer>
    <script type="text/javascript" async="" src="http://stats.g.doubleclick.net/dc.js"></script><script charset="ISO-8859-1" src="http://fast.wistia.com/static/concat/E-v1.js"></script>
    <script src="/scripts/scripts.js"></script>
    <script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-4281090-1']);
_gaq.push(['_trackPageview']);
(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; 
ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
        </script>
  
<script type="text/javascript" async="" src="http://28msec.disqus.com/embed.js"></script></body></html><script type="text/javascript">location.href = '/#' + location.pathname;</script>